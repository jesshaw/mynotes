---
title: spring中如何穿透多层共享公用信息
tags: java,spring,share,base path,基础路径
categories: 
  - java

thumbnail: /gallery/blue-water13.jpg
---

在实际应用中较多使用的还是是三层架构，主要是因为在程序员圈中，易理解，通用性高。不过各人理解不同使用起来存在差异，就比方说公用信息共享的问题，展示层共享较好理解，那业务层和数据层怎共享呢？
<!-- more -->

## 问题

如何在各层之间共享公用信息？即要兼顾性能，还要考虑效率和易维护性。

## 解决方案

先来说说疑虑，很长一段时间，因为三层都是以子项目来划分，共享公用信息就不自觉的使用方法传参的方式实现，随得需求和时间的增长，各个方法都会带上公用信息参数。如此一来，**自上而下的公用信息从展示一直传递到数据层**。问题解决了，但带来了一个新的重复的问题：即所有用到公用信息的地方都得增加该参数。

传参的方式还可以用继承基类的方式实现，即所有的**参数继承某个基类，基类中有共享信息的引用**，但此方案还是换汤不换药，仅是传参数少了，重复的问题依然存在。

以上两种方案都未能较好的解决共享公用信息的问题，以致于觉得问题出在架构层，把三层换成微内核心架构或者域驱动模型架构。但是无论架构怎么变，层之间的共享信息问题似乎总是存在，只是重复率高低问题。

最近从更高的层面来了看待这个问题，就迎刃而解了。一个程序启动于一个主进程，进程中可以启动多个线程。也就是主进程就是一直存在的，若**主进程中共享公用信息**，那么就可以达到穿透多层共享公用信息的问题。

spring中则是通过公用子项目，初始化一个对象到应用上下文（理解为主进程），在需要的任何层注入该对象即达到了共享公用信息的目的。

